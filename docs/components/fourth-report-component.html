<!DOCTYPE html>
<html>
  <head>
    <title>Fourth report</title>
    <style>
table {
  border-collapse: collapse;
  width: 100%;
}

th, td {
  border: 1px solid black;
  padding: 8px;
  text-align: left;
}


th {
  background-color: #f2f2f2;
}


table.thick-border {
    border: 3px solid black;
}
</style>
  </head>
<body>
  <h1>Лаб работа 4</h1>
  <h2>Задание 1. Проектирование модели требований и реестра вариантов использования</h2>
  <table>
    <thead>
        <tr>
            <th>Действующее лицо</th>
            <th>User Story</th>
            <th>Use Case</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Пациент</td>
            <td>Как пациент, я хочу видеть список доступных в моем регионе поликлиник</td>
            <td>UC 1.1 Посмотреть список поликлиник с фильтром по городу</td>
        </tr>
        <tr>
            <td>Пациент</td>
            <td>Как пациент, я хочу видеть перечень отделений для конкретно выбранной поликлиники</td>
            <td>UC 1.2 Посмотреть перечень отделений, относящихся к конкретной поликлинике</td>
        </tr>
        <tr>
            <td>Пациент</td>
            <td>Как пациент, я хочу иметь возможность посмотреть список всех докторов, доступных для записи в определенном отделении конкретной поликлиники</td>
            <td>UC 1.3 Посмотреть список докторов для определенного отделения конкретной поликлиники</td>
        </tr>
        <tr>
            <td>Пациент</td>
            <td>Как пациент, я хочу иметь возможность увидеть персональную страницу доктора с доступным временем для записи на прием</td>
            <td>UC 1.4 Посмотреть персональную страницу доктора</td>
        </tr>
        <tr>
            <td>Пациент</td>
            <td>Как пациент, я хочу иметь возможность записаться на прием на определенное время через персональную страницу доктора</td>
            <td>UC 1.5 Запись на прием через персональную страницу доктора</td>
        </tr>
        <tr>
            <td>Пациент</td>
            <td>Как пациент, я хочу иметь возможность поменять время приема на другое доступное и подходящее мне</td>
            <td>UC 1.6 Изменение времени записи на прием через персональную страницу доктора</td>
        </tr>
        <tr>
            <td>Пациент</td>
            <td>Как пациент, я хочу иметь возможность отменить запись к доктору</td>
            <td>UC 1.7 Отмена записи к доктору через персональную страницу доктора</td>
        </tr>
        <tr>
            <td>Сотрудник/Доктор</td>
            <td>Как сотрудник/доктор, я хочу иметь возможность видеть таблицу с записями ко всем докторам в конкретной поликлинике</td>
            <td>UC 2.1 Просмотр таблицы записей, относящихся к конкретной поликлинике</td>
        </tr>
        <tr>
            <td>Сотрудник/Доктор</td>
            <td>Как сотрудник/доктор, я хочу иметь возможность редактировать записи в таблице записей для конкретной поликлиники</td>
            <td>UC 2.2 Изменение записей в таблице записей для конкретной поликлиники</td>
        </tr>
        <tr>
            <td>Сотрудник/Доктор</td>
            <td>Как сотрудник/доктор, я хочу иметь возможность добавлять в таблицу записей для конкретной поликлиники новую запись</td>
            <td>UC 2.3 Добавление новой записи в таблицу записей для конкретной поликлиники</td>
        </tr>
        <tr>
            <td>Сотрудник/Доктор</td>
            <td>Как сотрудник/пациент, я хочу видеть список доступных в выбранном городе регионе поликлиник</td>
            <td>UC 1.1 Посмотреть список поликлиник с фильтром по городу</td>
        </tr>
        <tr>
            <td>Сотрудник/Доктор</td>
            <td>Как сотрудник/доктор, я хочу видеть перечень отделений для конкретно выбранной поликлиники</td>
            <td>UC 1.2 Посмотреть перечень отделений, относящихся к конкретной поликлинике</td>
        </tr>
        <tr>
            <td>Сотрудник/Доктор</td>
            <td>Как сотрудник/доктор, я хочу иметь возможность увидеть полный список докторов и отфильтровать его по городу, поликлинике, отделению</td>
            <td>UC 2.4 Посмотреть полный список докторов и отфильтровать его оп городу, поликлинике, отделению</td>
        </tr>
        <tr>
            <td>Сотрудник/Доктор</td>
            <td>Как сотрудник/доктор, я хочу иметь возможность увидеть персональную страницу конкретного доктора</td>
            <td>UC 1.4 Посмотреть персональную страницу доктора</td>
        </tr>
    </tbody>
</table>
  <h2>Задание 2. Проектирование физической модели базы данных</h2>
  <h3>Логическая схема БД</h3>
  <table>
    <thead>
        <tr>
            <th>Сущность</th>
            <th>Таблица БД</th>
            <th>Поле</th>
            <th>Смысл поля</th>
            <th>Тип данных</th>
        </tr>
    </thead>
    <tbody>

        <tr>
            <td rowspan="6">Пользователь</td>
            <td rowspan="6">User</td>
            <td>id</td>
            <td>Уникальный идентификатор пользователя (первичный ключ)</td>
            <td>SERIAL</td>
        </tr>
        <tr>
            <td>firstName</td>
            <td>Имя пользователя</td>
            <td>VARCHAR(255)</td>
        </tr>
        <tr>
            <td>lastName</td>
            <td>Фамилия пользователя</td>
            <td>VARCHAR(255)</td>
        </tr>
        <tr>
            <td>email</td>
            <td>Электронная почта</td>
            <td>VARCHAR(255)</td>
        </tr>
        <tr>
            <td>passwordHash</td>
            <td>Пароль пользователя в зашифрованном виде</td>
            <td>TEXT</td>
        </tr>
        <tr>
            <td>createdAt</td>
            <td>Дата и время создания пользователя</td>
            <td>TIMESTAMPZ</td>
        </tr>


        <tr>
            <td rowspan="5">Запись на прием</td>
            <td rowspan="5">Appointment</td>
            <td>id</td>
            <td>Уникальный идентификатор записи на прием (первичный ключ)</td>
            <td>SERIAL</td>
        </tr>
        <tr>
            <td>description</td>
            <td>Краткое описание (комментарий)</td>
            <td>TEXT</td>
        </tr>
        <tr>
            <td>time</td>
            <td>Время, на которое записан пациент</td>
            <td>TIMESTAMPZ</td>
        </tr>
         <tr>
            <td>userId</td>
            <td>Идентификатор пользователя (внешний ключ)</td>
            <td>INTEGER</td>
        </tr>
        <tr>
            <td>doctorId</td>
            <td>Идентификатор доктора (внешний ключ)</td>
            <td>INTEGER</td>
        </tr>

        <tr>
            <td rowspan="4">Запись на доске</td>
            <td rowspan="4">BoardItem</td>
            <td>id</td>
            <td>Уникальный идентификатор записи на доске (первичный ключ)</td>
            <td>SERIAL</td>
        </tr>
        <tr>
            <td>time</td>
            <td>Время, на которое создана запись (может отличаться от времени, на которое ссылается запись)</td>
            <td>TIMESTAMPZ</td>
        </tr>
        <tr>
            <td>description</td>
            <td>Краткое описание (комментарий)</td>
            <td>TEXT</td>
        </tr>
        <tr>
            <td>appointmentId</td>
            <td>Идентификатор записи на прием (внешний ключ)</td>
            <td>INTEGER</td>
        </tr>

         <tr>
            <td rowspan="6">Доктор</td>
            <td rowspan="6">Doctor</td>
            <td>id</td>
            <td>Уникальный идентификатор доктора (первичный ключ)</td>
            <td>SERIAL</td>
        </tr>
        <tr>
            <td>firstName</td>
            <td>Имя доктора</td>
            <td>VARCHAR(255)</td>
        </tr>
         <tr>
            <td>lastName</td>
            <td>Фамилия доктора</td>
            <td>VARCHAR(255)</td>
        </tr>
         <tr>
            <td>email</td>
            <td>Электронная почта доктора</td>
            <td>VARCHAR(255)</td>
        </tr>
         <tr>
            <td>passwordHash</td>
            <td>Пароль в зашифрованном виде</td>
            <td>TEXT</td>
        </tr>
        <tr>
            <td>departmentId</td>
            <td>Идентификатор отделения (внешний ключ)</td>
            <td>INTEGER</td>
        </tr>

        <tr>
            <td rowspan="3">Отделение</td>
            <td rowspan="3">Department</td>
            <td>id</td>
            <td>Уникальный идентификатор отделения (первичный ключ)</td>
            <td>SERIAL</td>
        </tr>
        <tr>
            <td>name</td>
            <td>Название отделения</td>
            <td>TEXT</td>
        </tr>
        <tr>
            <td>clinicId</td>
            <td>Идентификатор поликлиники (внешний ключ)</td>
            <td>INTEGER</td>
        </tr>
        
        <tr>
            <td rowspan="3">Поликлиника</td>
            <td rowspan="3">Clinic</td>
            <td>id</td>
            <td>Уникальный идентификатор поликлиники</td>
            <td>SERIAL</td>
        </tr>
        <tr>
            <td>name</td>
            <td>Название поликлиники</td>
            <td>TEXT</td>
        </tr>
        <tr>
            <td>city</td>
            <td>Город, в котором находится поликлиника</td>
            <td>VARCHAR(255)</td>
        </tr>

    </tbody>
</table>
  <h3>Физическая модель БД</h3>
  <img src="../resources/report4/Рисунок1.png" alt="">
  <h3>SQL скрипт для создания БД</h3>
  <img src="../resources/report4/Рисунок2.png" alt="">
  <img src="../resources/report4/Рисунок3.png" alt="">
  <h2>Задание 3. Проектирование маршрутов и конечных точек в виде спецификации API</h2>
  <table>
    <thead>
        <tr>
            <th>Сущность</th>
            <th>Таблица БД</th>
            <th>Маршрут</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Пользователь</td>
            <td>User</td>
            <td>/auth</td>
        </tr>
        <tr>
            <td>Запись на прием</td>
            <td>Appointment</td>
            <td>/appointment</td>
        </tr>
        <tr>
            <td>Запись на доске</td>
            <td>BoardItem</td>
            <td>/board/item</td>
        </tr>
        <tr>
            <td>Доктор</td>
            <td>Doctor</td>
            <td>/doctor</td>
        </tr>
        <tr>
            <td>Отделение</td>
            <td>Department</td>
            <td>/department</td>
        </tr>
        <tr>
            <td>Поликлиника</td>
            <td>Clinic</td>
            <td>/clinic</td>
        </tr>
    </tbody>
</table>
<table>
    <thead>
        <tr>
            <th>Действующее лицо</th>
            <th>Use Case</th>
            <th>Маршрут</th>
            <th>HTTP-запрос</th>
            <th>Аутентификация</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Пользователь</td>
            <td>Регистрация</td>
            <td>/auth/registration</td>
            <td>POST</td>
            <td>нет</td>
        </tr>
        <tr>
            <td>Пользователь</td>
            <td>Вход в систему</td>
            <td>/auth/login</td>
            <td>POST</td>
            <td>нет</td>
        </tr>
        <tr>
            <td>Пользователь</td>
            <td>Просмотр списка поликлиник</td>
            <td>/clinic</td>
            <td>GET</td>
            <td>да</td>
        </tr>
        <tr>
            <td>Пользователь</td>
            <td>Просмотр перечня отделений для конкретной поликлиники</td>
            <td>/department/:clinicId</td>
            <td>GET</td>
            <td>да</td>
        </tr>
        <tr>
            <td>Пользователь</td>
            <td>Просмотр перечня врачей для конкретного отделения</td>
            <td>/doctor/:departmentId</td>
            <td>GET</td>
            <td>да</td>
        </tr>
        <tr>
            <td>Пользователь</td>
            <td>Просмотр персональной страницы доктора</td>
            <td>/doctor/page/:id</td>
            <td>GET</td>
            <td>да</td>
        </tr>
        <tr>
            <td>Пользователь</td>
            <td>Запись на прием к конкретному доктору</td>
            <td>/doctor/make-appointment</td>
            <td>POST</td>
            <td>да</td>
        </tr>
        <tr>
            <td>Пользователь</td>
            <td>Изменение информации о записи на прием</td>
            <td>/doctor/edit-appointment</td>
            <td>PUT</td>
            <td>да</td>
        </tr>
        <tr>
            <td>Пользователь</td>
            <td>Отмена записи на прием</td>
            <td>/doctor/cancel-appointment/:appointmentId</td>
            <td>DELETE</td>
            <td>да</td>
        </tr>
        <tr>
            <td>Сотрудник</td>
            <td>Просмотр таблицы с записями</td>
            <td>/board</td>
            <td>GET</td>
            <td>Да</td>
        </tr>
        <tr>
            <td>Сотрудник</td>
            <td>Изменение существующей записи в таблице</td>
            <td>/board/item</td>
            <td>PUT</td>
            <td>да</td>
        </tr>
        <tr>
            <td>Сотрудник</td>
            <td>Добавление новой записи в таблицу</td>
            <td>/board/item</td>
            <td>POST</td>
            <td>Да</td>
        </tr>
        <tr>
            <td>Сотрудник</td>
            <td>Просмотр полного списка докторов (с возможностью отфильтровать по городу, поликлинике, отделению)</td>
            <td>/doctor</td>
            <td>GET</td>
            <td>да</td>
        </tr>


    </tbody>
</table>
  <h2>Задание 4. Проектирование и тестирование API</h2>
  <h3>Коллекция в postman для тестирования API</h3>
  <img src="../resources/report4/Рисунок4.png" alt="">
  <img src="../resources/report4/Рисунок5.png" alt="">
  <img src="../resources/report4/Рисунок6.png" alt="">
</body>
</html>
